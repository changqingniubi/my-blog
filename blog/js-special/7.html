<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JavaScript专题（七）让人头疼的类型转换 | 九殇的前端进阶笔记</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/my-blog/logo.png">
    <meta name="description" content="在这里一定有能帮助你成长的文章">
    
    <link rel="preload" href="/my-blog/assets/css/0.styles.e03cf7d9.css" as="style"><link rel="preload" href="/my-blog/assets/js/app.16942750.js" as="script"><link rel="preload" href="/my-blog/assets/js/2.a4a101bc.js" as="script"><link rel="preload" href="/my-blog/assets/js/37.ccebf9fd.js" as="script"><link rel="prefetch" href="/my-blog/assets/js/10.67221003.js"><link rel="prefetch" href="/my-blog/assets/js/11.17504448.js"><link rel="prefetch" href="/my-blog/assets/js/12.c440c1b7.js"><link rel="prefetch" href="/my-blog/assets/js/13.36a9759c.js"><link rel="prefetch" href="/my-blog/assets/js/14.52901fe7.js"><link rel="prefetch" href="/my-blog/assets/js/15.02da56a6.js"><link rel="prefetch" href="/my-blog/assets/js/16.11861541.js"><link rel="prefetch" href="/my-blog/assets/js/17.6701e7f6.js"><link rel="prefetch" href="/my-blog/assets/js/18.8fff8d63.js"><link rel="prefetch" href="/my-blog/assets/js/19.569c5beb.js"><link rel="prefetch" href="/my-blog/assets/js/20.9ac19174.js"><link rel="prefetch" href="/my-blog/assets/js/21.ba1d1748.js"><link rel="prefetch" href="/my-blog/assets/js/22.df3e08ba.js"><link rel="prefetch" href="/my-blog/assets/js/23.64974c3d.js"><link rel="prefetch" href="/my-blog/assets/js/24.d8498150.js"><link rel="prefetch" href="/my-blog/assets/js/25.95a7e6b0.js"><link rel="prefetch" href="/my-blog/assets/js/26.e384fcb0.js"><link rel="prefetch" href="/my-blog/assets/js/27.7988aae4.js"><link rel="prefetch" href="/my-blog/assets/js/28.1c24c4bc.js"><link rel="prefetch" href="/my-blog/assets/js/29.f3478c42.js"><link rel="prefetch" href="/my-blog/assets/js/3.f5277c67.js"><link rel="prefetch" href="/my-blog/assets/js/30.16a69881.js"><link rel="prefetch" href="/my-blog/assets/js/31.e298513c.js"><link rel="prefetch" href="/my-blog/assets/js/32.b38a6437.js"><link rel="prefetch" href="/my-blog/assets/js/33.efb4ba77.js"><link rel="prefetch" href="/my-blog/assets/js/34.0aa3460e.js"><link rel="prefetch" href="/my-blog/assets/js/35.de6c184c.js"><link rel="prefetch" href="/my-blog/assets/js/36.750b0ed3.js"><link rel="prefetch" href="/my-blog/assets/js/38.693b1fab.js"><link rel="prefetch" href="/my-blog/assets/js/39.14040020.js"><link rel="prefetch" href="/my-blog/assets/js/4.7ff454be.js"><link rel="prefetch" href="/my-blog/assets/js/5.87cd791f.js"><link rel="prefetch" href="/my-blog/assets/js/6.36f77360.js"><link rel="prefetch" href="/my-blog/assets/js/7.bf4bdbbf.js"><link rel="prefetch" href="/my-blog/assets/js/8.38d9362c.js"><link rel="prefetch" href="/my-blog/assets/js/9.ec1d7803.js">
    <link rel="stylesheet" href="/my-blog/assets/css/0.styles.e03cf7d9.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/my-blog/" class="home-link router-link-active"><!----> <span class="site-name">九殇的前端进阶笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/my-blog/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/my-blog/blog/" class="nav-link router-link-active">
  前端|博文
</a></div><div class="nav-item"><a href="/my-blog/algorithm/" class="nav-link">
  算法|题解
</a></div><div class="nav-item"><a href="/my-blog/css/" class="nav-link">
  CSS|基础
</a></div><div class="nav-item"><a href="https://github.com/changqingniubi/my-blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/my-blog/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/my-blog/blog/" class="nav-link router-link-active">
  前端|博文
</a></div><div class="nav-item"><a href="/my-blog/algorithm/" class="nav-link">
  算法|题解
</a></div><div class="nav-item"><a href="/my-blog/css/" class="nav-link">
  CSS|基础
</a></div><div class="nav-item"><a href="https://github.com/changqingniubi/my-blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>JavaScript专题</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/my-blog/blog/js-special/1.html" class="sidebar-link">JavaScript专题（一）变量与函数提升</a></li><li><a href="/my-blog/blog/js-special/2.html" class="sidebar-link">JavaScript专题（二）数组去重</a></li><li><a href="/my-blog/blog/js-special/3.html" class="sidebar-link">JavaScript专题（三）防抖</a></li><li><a href="/my-blog/blog/js-special/4.html" class="sidebar-link">JavaScript专题（四）节流</a></li><li><a href="/my-blog/blog/js-special/5.html" class="sidebar-link">JavaScript专题（五）深浅拷贝</a></li><li><a href="/my-blog/blog/js-special/6.html" class="sidebar-link">JavaScript专题（六）数据类型检测的那些事</a></li><li><a href="/my-blog/blog/js-special/7.html" aria-current="page" class="active sidebar-link">JavaScript专题（七）让人头疼的类型转换</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/my-blog/blog/js-special/7.html#前言" class="sidebar-link">前言</a></li><li class="sidebar-sub-header"><a href="/my-blog/blog/js-special/7.html#一、类型转换是什么" class="sidebar-link">一、类型转换是什么？</a></li><li class="sidebar-sub-header"><a href="/my-blog/blog/js-special/7.html#二、转换的基本规则" class="sidebar-link">二、转换的基本规则</a></li><li class="sidebar-sub-header"><a href="/my-blog/blog/js-special/7.html#三、对象转字符串和数字" class="sidebar-link">三、对象转字符串和数字</a></li><li class="sidebar-sub-header"><a href="/my-blog/blog/js-special/7.html#四、涉及到类型转换的运算符" class="sidebar-link">四、涉及到类型转换的运算符</a></li><li class="sidebar-sub-header"><a href="/my-blog/blog/js-special/7.html#五、常见的类型转换操作" class="sidebar-link">五、常见的类型转换操作</a></li></ul></li><li><a href="/my-blog/blog/js-special/8.html" class="sidebar-link">JavaScript专题（八）数组扁平化</a></li><li><a href="/my-blog/blog/js-special/9.html" class="sidebar-link">JavaScript专题（九）数组中查找指定元素</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript设计模式</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ES6</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="javascript专题-七-让人头疼的类型转换"><a href="#javascript专题-七-让人头疼的类型转换" class="header-anchor">#</a> JavaScript专题（七）让人头疼的类型转换</h1> <h2 id="前言"><a href="#前言" class="header-anchor">#</a> 前言</h2> <p>强制类型转换常常为人诟病，但实际上很多时候它们是非常有用的，有些强制类型转换可以明确告诉我们哪里发生了类型转换，有助于提高代码可读性和可维护性。但有些却发生在我们看不见的地方，所以我们今天来讨论一下平时常见的类型转换运算和操作～</p> <h2 id="一、类型转换是什么"><a href="#一、类型转换是什么" class="header-anchor">#</a> 一、类型转换是什么？</h2> <p>我们都知道变量的类型由它存储的值的类型来决定，所以将值从一种类型转换为另一种类型通常称为类型转换（type-casting），而它也可以根据某些特点分成两类——显示类型转换和强制类型转换。</p> <p><strong>显示类型转换</strong></p> <p>显式类型转换主要是指通过 String、Number、Boolean 等构造方法转换相应的字符串、数字、布尔值</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token function">String</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> num <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span><span class="token string">&quot;123.3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//number:123.3</span>
</code></pre></div><p>这是显式的情况——类型的转换的动作是由我们主动发起的。</p> <h4 id="_1-2-隐式类型转换"><a href="#_1-2-隐式类型转换" class="header-anchor">#</a> 1.2 隐式类型转换</h4> <p><strong>有意思的事</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> newStr1 <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token string">&quot;str&quot;</span><span class="token punctuation">;</span> <span class="token comment">// '1str'</span>
<span class="token keyword">const</span> newStr2 <span class="token operator">=</span> <span class="token string">&quot;hello&quot;</span> <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token number">89</span><span class="token punctuation">,</span> <span class="token number">150.156</span><span class="token punctuation">,</span> <span class="token string">&quot;mike&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 'hello89,150.156,mike'</span>
</code></pre></div><p>如果是做 C++、Java 以及其他强类型语言的同学写到类似的组合，应该就会报错了，但在 Js 中不会。</p> <p>既然隐式类型转换会一直存在下去，我们就要接受它并去了解它的优缺点！</p> <h2 id="二、转换的基本规则"><a href="#二、转换的基本规则" class="header-anchor">#</a> 二、转换的基本规则</h2> <p>有些数据类型之间的转换，会经历“多道工序”，我们尽量先介绍“工序”少的～</p> <h4 id="_2-1-原始值转字符串"><a href="#_2-1-原始值转字符串" class="header-anchor">#</a> 2.1 原始值转字符串</h4> <p>我们使用 String 函数将类型转换成字符串类型，如果 <code>String</code> 函数不传参数，返回空字符串，如果有参数，调用 <code>ToString(value)</code>，而 <code>ToString</code> 也给了一个对应的结果表。表如下：</p> <p><strong>规则：</strong></p> <table><thead><tr><th>参数类型</th> <th>返回</th></tr></thead> <tbody><tr><td>Undefined</td> <td>&quot;undefined&quot;</td></tr> <tr><td>Null</td> <td>&quot;null&quot;</td></tr> <tr><td>Boolean</td> <td>如果参数是 true，返回 &quot;true&quot;。参数为 false，返回 &quot;false&quot;</td></tr> <tr><td>Number</td> <td>结果有很多种，例如 NaN 和 Infinity</td></tr> <tr><td>String</td> <td>返回与之相等的值</td></tr></tbody></table> <p><strong>举例：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 空字符串</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// null</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>

<span class="token comment">// Number</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token number">NaN</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// NaN</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token number">Infinity</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Infinity</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">Infinity</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// -Infinity</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
</code></pre></div><h4 id="_2-2-原始值转数字"><a href="#_2-2-原始值转数字" class="header-anchor">#</a> 2.2 原始值转数字</h4> <p>有时我们需要将非数字值当作数字来使用，比如数学运算。为此 ES5 规范在 9.3 节定义了抽象操作<code>ToNumber</code>，类似 ToString，它也有一定的转换规则：</p> <table><thead><tr><th>参数类型</th> <th>返回</th></tr></thead> <tbody><tr><td>true</td> <td>1</td></tr> <tr><td>false</td> <td>0</td></tr> <tr><td>undefined</td> <td>NaN</td></tr> <tr><td>null</td> <td>0</td></tr> <tr><td>String</td> <td>返回与之相等的值，但如果处理失败则返回 NaN</td></tr></tbody></table> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">Number</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">Number</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">Number</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// NaN</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">Number</span><span class="token punctuation">(</span><span class="token string">&quot;九殇&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// NaN</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">Number</span><span class="token punctuation">(</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
</code></pre></div><h4 id="_2-3-原始值转布尔"><a href="#_2-3-原始值转布尔" class="header-anchor">#</a> 2.3 原始值转布尔</h4> <p>我们使用 <code>Boolean 函数</code>将类型转换成布尔类型，在 JavaScript 中，只有 <strong>6 种</strong> 值可以被转换成<code>false</code>，其他都会被转换成<code>true</code>。</p> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">Boolean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">Boolean</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">Boolean</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">Boolean</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">Boolean</span><span class="token punctuation">(</span><span class="token operator">+</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">Boolean</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">Boolean</span><span class="token punctuation">(</span><span class="token number">NaN</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">Boolean</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
</code></pre></div><h4 id="_2-4-原始值转对象"><a href="#_2-4-原始值转对象" class="header-anchor">#</a> 2.4 原始值转对象</h4> <p>原始值到对象的转换非常简单，原始值通过调用 String()、Number() 或者 Boolean() 构造函数，转换为它们各自的<strong>包装对象</strong>。</p> <p><code>null</code> 和 <code>undefined</code> 属于例外，当将它们用在期望是一个对象的地方都会造成一个类型错误 (TypeError) 异常，而不会执行正常的转换。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// number</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Number</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// object</span>
</code></pre></div><h2 id="三、对象转字符串和数字"><a href="#三、对象转字符串和数字" class="header-anchor">#</a> 三、对象转字符串和数字</h2> <h4 id="_3-0-对象转布尔值"><a href="#_3-0-对象转布尔值" class="header-anchor">#</a> 3.0 对象转布尔值</h4> <p>3.0 这一小节是我认为值得一提，但篇幅较少的一点：</p> <p>对象到布尔值的转换非常简单：所有对象(包括数组和函数)都转换为 <code>true</code>。对于包装对象也是这样，举个例子：</p> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">Boolean</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Boolean</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre></div><h4 id="_3-1-对象的-tostring-和-valueof"><a href="#_3-1-对象的-tostring-和-valueof" class="header-anchor">#</a> 3.1 对象的 toString 和 valueOf</h4> <p>这是一个不太常见的操作，或者说现象，但我们也不能忽略它。</p> <ol><li>对象=&gt;字符串</li> <li>对象=&gt;数字</li></ol> <p>转换都是通过调用<strong>待转换对象</strong>的一个方法来完成的，在 Js 中，一般待转换对象拥有两个方法：</p> <ol><li>toString</li> <li>valueOf</li></ol> <p><strong>toString</strong></p> <p>所有的对象除了<code>null</code>和<code>undefined</code>之外的任何值都具有<code>toString</code>方法，通常情况下，它和使用<code>String</code>方法返回的结果一致。</p> <p>在<a href="https://blog.csdn.net/jbj6568839z/article/details/108130316" target="_blank" rel="noopener noreferrer">JavaSciprt 专题之类型检测<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>中我们提到过<code>Object.prototype.toString</code> 方法会根据这个对象的[[class]]内部属性，返回由 &quot;[object &quot; 和 class 和 &quot;]&quot; 三个部分组成的字符串。举个例子：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;九殇&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
obj<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;[object Object]&quot;</span>

obj<span class="token punctuation">.</span>toString <span class="token operator">===</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>toString<span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre></div><p>我们已经验证了 =&gt; 对象调用 toString 方法是调用其构造函数原型上的方法</p> <p>其他数据类型的 toString 方法也都有自己的特点：</p> <ul><li>数组：将每个数组元素转换成一个字符串，并在元素之间添加逗号后合并成结果字符串。</li> <li>函数：返回源代码字符串。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;1,2,3,4&quot;</span>
<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;&quot;</span>

<span class="token keyword">function</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
func<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;function func () { console.log() }&quot;</span>
</code></pre></div><p><strong>valueOf</strong></p> <p>valueOf 方法返回这个对象本身，数组、函数、正则简单的继承了这个默认方法，也会返回对象本身。日期是一个例外，它会返回它的一个内容表示: 1970 年 1 月 1 日以来的毫秒数。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">2017</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">21</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>date<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1495296000000</span>
</code></pre></div><h4 id="_3-2-对象转字符串和数字的基本规则"><a href="#_3-2-对象转字符串和数字的基本规则" class="header-anchor">#</a> 3.2 对象转字符串和数字的基本规则</h4> <p>在我们知道了 toString()和 valueOf()这两个方法后，来看看转换的规则，即什么时候用：<a href="http://es5.github.io/#x9.8" target="_blank" rel="noopener noreferrer">ES5 规范 9.8<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <table><thead><tr><th>参数类型</th> <th>结果</th></tr></thead> <tbody><tr><td>Object</td> <td>1. primValue = ToPrimitive(input, String) <br> 2. 返回 ToString(primValue)</td></tr></tbody></table> <p>所谓的 ToPrimitive 方法，其实就是输入一个值，然后返回一个一定是基本类型的值。</p> <p>我们总结一下，当我们用 String 方法转化一个值的时候：</p> <ol><li>基本类型：参照 “原始值转字符” 的对应表</li> <li>引用类型：调用一个<code>ToPrimitive</code>方法，将其转为基本类型，然后再参照 “原始值转字符” 的对应表进行转换。</li></ol> <p>其实，从对象到数字的转换也是一样：</p> <table><thead><tr><th>参数类型</th> <th>结果</th></tr></thead> <tbody><tr><td>Object</td> <td>1. primValue = ToPrimitive(input, Number) <br> 2. 返回 ToNumber(primValue)</td></tr></tbody></table> <p>注意：转字符和数字的时候处理略有不同～</p> <h4 id="_3-3-toprimitive"><a href="#_3-3-toprimitive" class="header-anchor">#</a> 3.3 ToPrimitive</h4> <p>那接下来就要看看 ToPrimitive 了，<a href="http://es5.github.io/#x9.1" target="_blank" rel="noopener noreferrer">ES5 规范 9.1<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>这个返回原始值的方法接受一个输入参数 和一个可选的参数来表示转换类型：</p> <ol><li>input，表示要处理的输入值
<ul><li>如果传入的 input 是 Undefined、Null、Boolean、Number、String 类型，直接返回该值。</li></ul></li> <li>PreferredType，非必填，表示希望转换成的类型，有两个值可以选，Number 或者 String。
<ul><li>当不传入 PreferredType 时，如果 input 是日期类型，相当于传入 String，否则，都相当于传入 Number。</li></ul></li></ol> <p><strong>如果是 ToPrimitive(obj, Number)，处理步骤如下：</strong></p> <ul><li>如果 obj 为 基本类型，直接返回</li> <li>否则，调用 valueOf 方法，如果返回一个原始值，则 JavaScript 将其返回。</li> <li>否则，调用 toString 方法，如果返回一个原始值，则 JavaScript 将其返回。</li> <li>否则，JavaScript 抛出一个类型错误异常。</li></ul> <p><strong>如果是 ToPrimitive(obj, String)，处理步骤如下：</strong></p> <ul><li>如果 obj 为 基本类型，直接返回</li> <li>否则，调用 toString 方法，如果返回一个原始值，则 JavaScript 将其返回。</li> <li>否则，调用 valueOf 方法，如果返回一个原始值，则 JavaScript 将其返回。</li> <li>否则，JavaScript 抛出一个类型错误异常。</li></ul> <p>所以总结下，对象转字符串(就是 Number() 函数)可以概括为：</p> <p><strong>举个例子：</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">Number</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// NaN</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">Number</span><span class="token punctuation">(</span><span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// NaN</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">Number</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">Number</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">Number</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// NaN</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>
  <span class="token function">Number</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// NaN</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">Number</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\d+</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// NaN</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">Number</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">2010</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1262275200000</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">Number</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// NaN</span>
</code></pre></div><p><strong>注意：</strong></p> <ul><li><p>转换对象时，你会发现它变成了 NaN，所以</p></li> <li><p>在这个例子中，<code>[]</code>和<code>[0]</code>都返回了 0</p> <ul><li>当我们 Number([]) 的时候，先调用 [] 的 valueOf 方法，此时返回 []；</li> <li>因为返回了一个对象，所以又调用了 toString 方法；</li> <li>此时返回一个空字符串，接下来调用 ToNumber 这个规范上的方法；</li> <li>等价于 <code>Number([].valueOf().toString())</code>，结果为 0；</li></ul></li> <li><p><code>[1, 2, 3]</code> 却返回了一个 NaN：</p> <ul><li>当我们 Number([]) 的时候，先调用 <code>[1,2,3]</code> 的 <code>valueOf</code> 方法，此时返回 [1,2,3]；</li> <li>因为返回了一个对象，所以又调用了 toString 方法；</li> <li>此时&quot;1,2,3&quot;，接下来调用 ToNumber 这个规范上的方法；</li> <li>等价于 <code>Number([1,2,3].valueOf().toString())</code>，结果为 NaN；</li></ul></li></ul> <h2 id="四、涉及到类型转换的运算符"><a href="#四、涉及到类型转换的运算符" class="header-anchor">#</a> 四、涉及到类型转换的运算符</h2> <p>读到这里我们对类型转换有了一定的概念，现在我们再来看看在运算中常见的类型转换问题。</p> <h4 id="_4-1-一元操作符"><a href="#_4-1-一元操作符" class="header-anchor">#</a> 4.1 一元操作符 +</h4> <p><code>+a</code> 运算符显式地将后面的变量 a 保存的数据转换为数字，不是字符串拼接。
查看 ES5 规范 <a href="http://es5.github.io/#x11.4.6" target="_blank" rel="noopener noreferrer">11.4.6<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，会调用 ToNumber 处理该值，相当于 Number('1')，最终结果返回数字 1。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token string">&quot;1.1&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token number">5</span> <span class="token operator">+</span> <span class="token operator">+</span>a<span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 6.6</span>
</code></pre></div><p>上面的代码应该是我们经常用到的，当我们知道一个字段是字符串但希望它是数字时，一般会这么做～</p> <p>我们一起验证下下面这些类型</p> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">+</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">+</span><span class="token punctuation">[</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">+</span><span class="token punctuation">[</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;3&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// NaN</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">+</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// NaN</span>
</code></pre></div><p>既然是调用 ToNumber 方法我们在之前的小节中提到过</p> <ul><li>如果 obj 为基本类型，直接返回</li> <li>否则，调用 valueOf 方法，如果返回一个原始值，则 JavaScript 将其返回。</li> <li>否则，调用 toString 方法，如果返回一个原始值，则 JavaScript 将其返回。</li> <li>否则，JavaScript 抛出一个类型错误异常。</li> <li>以 +[] 为例，[] 调用 valueOf 方法，返回一个空数组，因为不是原始值，调用 toString 方法，返回 &quot;&quot;。</li> <li>得到返回值后，然后再调用 ToNumber 方法，&quot;&quot; 对应的返回值是 0，所以最终返回 0。</li></ul> <h4 id="_4-2-一元操作符"><a href="#_4-2-一元操作符" class="header-anchor">#</a> 4.2 一元操作符 ！</h4> <p>一元运算符<code>!</code>显式地将值强制类型转换为布尔值。但是它同时还<strong>将真值反转为假值</strong>（或者将假值反转为真值）。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token string">&quot;str&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> c <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">!</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">!</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">!</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//false</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre></div><p>同样的 <code>!!</code> 会讲其他类型转成对应的 bool 值</p> <p>！和 + 运算符是我们最常用的两种显式类型转换运算符，之后我们再看看那些不经意间就被转换类型的操作～</p> <h2 id="五、常见的类型转换操作"><a href="#五、常见的类型转换操作" class="header-anchor">#</a> 五、常见的类型转换操作</h2> <h4 id="_5-1-字符串和数字之间"><a href="#_5-1-字符串和数字之间" class="header-anchor">#</a> 5.1 字符串和数字之间</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> num <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token string">&quot;200&quot;</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num <span class="token operator">+</span> str<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// '1200'</span>
</code></pre></div><p>这段代码大家应该都知道结果，但是其中的原理是否和大家想的一样呢？</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> arr1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> arr2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr1 <span class="token operator">+</span> arr2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1,23,4</span>
</code></pre></div><p>两个数组的结果为什么也是个字符串？</p> <p><strong>原因</strong></p> <p><a href="http://es5.github.io/#x11.6.1" target="_blank" rel="noopener noreferrer">ES5 规范 11.6.1 中<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>提到，如果某个操作数是字符串或者能通过以下步骤转换为字符串，+将进行拼接操作</p> <p>如果其中的一个操作数是<strong>引用类型</strong>，则首先对其进行<code>ToPrimitive</code>操作（第三小节有提）</p> <p><strong>总结</strong></p> <p>简单来说就是，如果<code>+</code>的其中一个操作数是字符串（或者通过以上步骤可以得到字符串），则执行字符串拼接；否则执行数字加法。</p> <h4 id="_5-2-被转换成布尔值的操作"><a href="#_5-2-被转换成布尔值的操作" class="header-anchor">#</a> 5.2 被转换成布尔值的操作</h4> <p>现在我们来看看到布尔值的隐式强制类型转换，它最为常见也最容易搞错。相对布尔值，数字和字符串操作中的隐式强制类型转换还算比较明显。</p> <p>下面的情况会发生布尔值隐式强制类型转换。</p> <ul><li>if (..)语句
<ul><li>括号内的条件为<code>true</code>时执行操作；</li></ul></li> <li>for ( let i = 0; i &lt; 10; i++ )
<ul><li>语句中的条件判断表达式即 i &lt; 10 为<code>true</code></li></ul></li> <li>while (..)和 do..while(..)
<ul><li>循环中的条件判断表达式为<code>true</code>;</li></ul></li> <li>三目运算 <code>? ：</code>；</li> <li>逻辑运算符 ||（逻辑或）和 &amp;&amp;（逻辑与）左边的操作数；</li></ul> <h4 id="_5-3-和"><a href="#_5-3-和" class="header-anchor">#</a> 5.3 == 和 ===</h4> <p>谈到类型转换，一定绕不开 <code>==</code> 和 <code>===</code>。</p> <p><code>==</code>用于比较两个值是否相等，当要比较的两个值类型不一样的时候，就会发生类型的转换。</p> <p>在<a href="http://es5.github.io/#x11.9.5" target="_blank" rel="noopener noreferrer">ES5 规范 11.9.5 中<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>当执行 x == y 时：</p> <ul><li>如果 x 与 y 是同一类型：
<ul><li>x 是 Undefined，返回 true</li> <li>x 是 Null，返回 true</li> <li>x 是数字：
<ul><li>x 是 NaN，返回 false</li> <li>y 是 NaN，返回 false</li> <li>x 与 y 相等，返回 true</li> <li>x 是+0，y 是-0，返回 true</li> <li>x 是-0，y 是+0，返回 true</li></ul></li> <li>x 是字符串，完全相等返回 true,否则返回 false</li> <li>x 是布尔值，x 和 y 都是 true 或者 false，返回 true，否则返回 false</li> <li>x 和 y 指向同一个对象，返回 true，否则返回 false</li></ul></li> <li>x 是 null 并且 y 是 undefined，返回 true</li> <li>x 是 undefined 并且 y 是 null，返回 true</li> <li>x 是数字，y 是字符串，判断 x == ToNumber(y)</li> <li>x 是字符串，y 是数字，判断 ToNumber(x) == y</li> <li>x 是布尔值，判断 ToNumber(x) == y</li> <li>y 是布尔值，判断 x ==ToNumber(y)</li> <li>x 不是字符串或者数字，y 是对象，判断 x == ToPrimitive(y)</li> <li>x 是对象，y 不是字符串或者数字，判断 ToPrimitive(x) == y</li></ul> <h4 id="参考"><a href="#参考" class="header-anchor">#</a> 参考</h4> <ul><li><a href="https://github.com/mqyqingfeng/Blog/issues/164" target="_blank" rel="noopener noreferrer">JavaScript 深入之头疼的类型转换(下)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>《你不知道的 Js》</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/my-blog/blog/js-special/6.html" class="prev">
        JavaScript专题（六）数据类型检测的那些事
      </a></span> <span class="next"><a href="/my-blog/blog/js-special/8.html">
        JavaScript专题（八）数组扁平化
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/my-blog/assets/js/app.16942750.js" defer></script><script src="/my-blog/assets/js/2.a4a101bc.js" defer></script><script src="/my-blog/assets/js/37.ccebf9fd.js" defer></script>
  </body>
</html>
